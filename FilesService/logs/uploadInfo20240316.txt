2024-03-16 19:31:44.825 +00:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-03-16 19:31:44.886 +00:00 [DBG] Hosting starting
2024-03-16 19:31:44.966 +00:00 [INF] Now listening on: http://localhost:5001
2024-03-16 19:31:44.967 +00:00 [DBG] Loaded hosting startup assembly FilesService
2024-03-16 19:31:44.967 +00:00 [INF] Application started. Press Ctrl+C to shut down.
2024-03-16 19:31:44.967 +00:00 [INF] Hosting environment: Development
2024-03-16 19:31:44.967 +00:00 [INF] Content root path: /home/mc/code/projects/BlackLake.dev/UploadService/FilesService
2024-03-16 19:31:44.967 +00:00 [DBG] Hosting started
2024-03-16 19:33:01.088 +00:00 [DBG] Connection id "0HN25TVI63EQQ" received FIN.
2024-03-16 19:33:01.095 +00:00 [DBG] Connection id "0HN25TVI63EQQ" accepted.
2024-03-16 19:33:01.097 +00:00 [DBG] Connection id "0HN25TVI63EQQ" started.
2024-03-16 19:33:01.115 +00:00 [DBG] Connection id "0HN25TVI63EQR" accepted.
2024-03-16 19:33:01.116 +00:00 [DBG] Connection id "0HN25TVI63EQR" started.
2024-03-16 19:33:01.120 +00:00 [DBG] Connection id "0HN25TVI63EQQ" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-03-16 19:33:01.128 +00:00 [DBG] Connection id "0HN25TVI63EQQ" disconnecting.
2024-03-16 19:33:01.129 +00:00 [DBG] Connection id "0HN25TVI63EQQ" stopped.
2024-03-16 19:33:01.145 +00:00 [INF] Request starting HTTP/1.1 GET http://localhost:5001/api/files - multipart/form-data; boundary=--------------------------343109140500166432976222 38019
2024-03-16 19:33:01.152 +00:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-03-16 19:33:01.183 +00:00 [DBG] 1 candidate(s) found for the request path '/api/files'
2024-03-16 19:33:01.185 +00:00 [DBG] Endpoint 'FilesService.Controllers.FileUploadController.GetFile (FilesService)' with route pattern 'api/files' is valid for the request path '/api/files'
2024-03-16 19:33:01.186 +00:00 [DBG] Request matched endpoint 'FilesService.Controllers.FileUploadController.GetFile (FilesService)'
2024-03-16 19:33:01.197 +00:00 [WRN] Failed to determine the https port for redirect.
2024-03-16 19:33:01.198 +00:00 [INF] Executing endpoint 'FilesService.Controllers.FileUploadController.GetFile (FilesService)'
2024-03-16 19:33:01.262 +00:00 [INF] Route matched with {action = "GetFile", controller = "FileUpload"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[FilesService.Models.FileDto]] GetFile(System.Guid) on controller FilesService.Controllers.FileUploadController (FilesService).
2024-03-16 19:33:01.264 +00:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-03-16 19:33:01.264 +00:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-03-16 19:33:01.264 +00:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-03-16 19:33:01.264 +00:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-03-16 19:33:01.265 +00:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-03-16 19:33:01.266 +00:00 [DBG] Executing controller factory for controller FilesService.Controllers.FileUploadController (FilesService)
2024-03-16 19:33:01.283 +00:00 [INF] Executed action FilesService.Controllers.FileUploadController.GetFile (FilesService) in 12.7199ms
2024-03-16 19:33:01.289 +00:00 [INF] Executed endpoint 'FilesService.Controllers.FileUploadController.GetFile (FilesService)'
2024-03-16 19:33:01.290 +00:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Unable to resolve service for type 'FilesService.Services.IFileHandler' while attempting to activate 'FilesService.Controllers.FileUploadController'.
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.ThrowHelperUnableToResolveService(Type type, Type requiredBy)
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.GetService(IServiceProvider sp, Type type, Type requiredBy, Boolean hasDefaultValue, Object key)
   at lambda_method8(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-03-16 19:33:01.365 +00:00 [DBG] Connection id "0HN25TVI63EQR" completed keep alive response.
2024-03-16 19:33:01.368 +00:00 [INF] Request finished HTTP/1.1 GET http://localhost:5001/api/files - 500 null text/plain; charset=utf-8 224.6944ms
2024-03-16 19:33:01.369 +00:00 [DBG] Connection id "0HN25TVI63EQR", Request id "0HN25TVI63EQR:00000001": started reading request body.
2024-03-16 19:33:01.370 +00:00 [DBG] Connection id "0HN25TVI63EQR", Request id "0HN25TVI63EQR:00000001": done reading request body.
2024-03-16 19:35:44.823 +00:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-03-16 19:35:44.885 +00:00 [DBG] Hosting starting
2024-03-16 19:35:44.967 +00:00 [INF] Now listening on: http://localhost:5001
2024-03-16 19:35:44.968 +00:00 [DBG] Loaded hosting startup assembly FilesService
2024-03-16 19:35:44.968 +00:00 [INF] Application started. Press Ctrl+C to shut down.
2024-03-16 19:35:44.970 +00:00 [INF] Hosting environment: Development
2024-03-16 19:35:44.970 +00:00 [INF] Content root path: /home/mc/code/projects/BlackLake.dev/UploadService/FilesService
2024-03-16 19:35:44.970 +00:00 [DBG] Hosting started
2024-03-16 19:35:48.486 +00:00 [DBG] Connection id "0HN25U142H8M0" received FIN.
2024-03-16 19:35:48.492 +00:00 [DBG] Connection id "0HN25U142H8M0" accepted.
2024-03-16 19:35:48.494 +00:00 [DBG] Connection id "0HN25U142H8M0" started.
2024-03-16 19:35:48.496 +00:00 [DBG] Connection id "0HN25U142H8M1" accepted.
2024-03-16 19:35:48.496 +00:00 [DBG] Connection id "0HN25U142H8M1" started.
2024-03-16 19:35:48.501 +00:00 [DBG] Connection id "0HN25U142H8M0" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-03-16 19:35:48.511 +00:00 [DBG] Connection id "0HN25U142H8M0" disconnecting.
2024-03-16 19:35:48.513 +00:00 [DBG] Connection id "0HN25U142H8M0" stopped.
2024-03-16 19:35:48.522 +00:00 [INF] Request starting HTTP/1.1 GET http://localhost:5001/api/files - multipart/form-data; boundary=--------------------------933004768708690154201517 38019
2024-03-16 19:35:48.528 +00:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-03-16 19:35:48.553 +00:00 [DBG] 1 candidate(s) found for the request path '/api/files'
2024-03-16 19:35:48.556 +00:00 [DBG] Endpoint 'FilesService.Controllers.FileUploadController.GetFile (FilesService)' with route pattern 'api/files' is valid for the request path '/api/files'
2024-03-16 19:35:48.557 +00:00 [DBG] Request matched endpoint 'FilesService.Controllers.FileUploadController.GetFile (FilesService)'
2024-03-16 19:35:48.568 +00:00 [WRN] Failed to determine the https port for redirect.
2024-03-16 19:35:48.569 +00:00 [INF] Executing endpoint 'FilesService.Controllers.FileUploadController.GetFile (FilesService)'
2024-03-16 19:35:48.632 +00:00 [INF] Route matched with {action = "GetFile", controller = "FileUpload"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[FilesService.Models.FileDto]] GetFile(System.Guid) on controller FilesService.Controllers.FileUploadController (FilesService).
2024-03-16 19:35:48.635 +00:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-03-16 19:35:48.635 +00:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-03-16 19:35:48.636 +00:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-03-16 19:35:48.636 +00:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-03-16 19:35:48.636 +00:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-03-16 19:35:48.638 +00:00 [DBG] Executing controller factory for controller FilesService.Controllers.FileUploadController (FilesService)
2024-03-16 19:35:48.790 +00:00 [DBG] Executed controller factory for controller FilesService.Controllers.FileUploadController (FilesService)
2024-03-16 19:35:48.797 +00:00 [DBG] Connection id "0HN25U142H8M1", Request id "0HN25U142H8M1:00000001": started reading request body.
2024-03-16 19:35:48.798 +00:00 [DBG] Connection id "0HN25U142H8M1", Request id "0HN25U142H8M1:00000001": done reading request body.
2024-03-16 19:35:48.810 +00:00 [DBG] Attempting to bind parameter 'fileId' of type 'System.Guid' ...
2024-03-16 19:35:48.812 +00:00 [DBG] Attempting to bind parameter 'fileId' of type 'System.Guid' using the name '' in request data ...
2024-03-16 19:35:48.813 +00:00 [DBG] Could not find a value in the request with name '' for binding parameter 'fileId' of type 'System.Guid'.
2024-03-16 19:35:48.813 +00:00 [DBG] Done attempting to bind parameter 'fileId' of type 'System.Guid'.
2024-03-16 19:35:48.813 +00:00 [DBG] Done attempting to bind parameter 'fileId' of type 'System.Guid'.
2024-03-16 19:35:48.813 +00:00 [DBG] Attempting to validate the bound parameter 'fileId' of type 'System.Guid' ...
2024-03-16 19:35:48.815 +00:00 [DBG] Done attempting to validate the bound parameter 'fileId' of type 'System.Guid'.
2024-03-16 19:35:48.825 +00:00 [INF] Executing action method FilesService.Controllers.FileUploadController.GetFile (FilesService) - Validation state: "Valid"
2024-03-16 19:35:48.829 +00:00 [INF] Executed action method FilesService.Controllers.FileUploadController.GetFile (FilesService), returned result Microsoft.AspNetCore.Mvc.NotFoundResult in 1.2894ms.
2024-03-16 19:35:48.839 +00:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2024-03-16 19:35:48.841 +00:00 [DBG] No information found on request to perform content negotiation.
2024-03-16 19:35:48.842 +00:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2024-03-16 19:35:48.843 +00:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2024-03-16 19:35:48.843 +00:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2024-03-16 19:35:48.888 +00:00 [INF] Executed action FilesService.Controllers.FileUploadController.GetFile (FilesService) in 248.3811ms
2024-03-16 19:35:48.889 +00:00 [INF] Executed endpoint 'FilesService.Controllers.FileUploadController.GetFile (FilesService)'
2024-03-16 19:35:48.889 +00:00 [DBG] Connection id "0HN25U142H8M1" completed keep alive response.
2024-03-16 19:35:48.893 +00:00 [INF] Request finished HTTP/1.1 GET http://localhost:5001/api/files - 404 null application/problem+json; charset=utf-8 371.4661ms
2024-03-16 19:35:55.663 +00:00 [INF] Request starting HTTP/1.1 POST http://localhost:5001/api/files - multipart/form-data; boundary=--------------------------216144300457310364613895 38019
2024-03-16 19:35:55.664 +00:00 [DBG] 1 candidate(s) found for the request path '/api/files'
2024-03-16 19:35:55.664 +00:00 [DBG] Endpoint 'FilesService.Controllers.FileUploadController.UploadFile (FilesService)' with route pattern 'api/files' is valid for the request path '/api/files'
2024-03-16 19:35:55.664 +00:00 [DBG] Request matched endpoint 'FilesService.Controllers.FileUploadController.UploadFile (FilesService)'
2024-03-16 19:35:55.665 +00:00 [INF] Executing endpoint 'FilesService.Controllers.FileUploadController.UploadFile (FilesService)'
2024-03-16 19:35:55.671 +00:00 [INF] Route matched with {action = "UploadFile", controller = "FileUpload"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[FilesService.Models.FileDto]] UploadFile(FilesService.Models.FileUploadCreationDto) on controller FilesService.Controllers.FileUploadController (FilesService).
2024-03-16 19:35:55.672 +00:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-03-16 19:35:55.672 +00:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-03-16 19:35:55.672 +00:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-03-16 19:35:55.672 +00:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-03-16 19:35:55.672 +00:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-03-16 19:35:55.673 +00:00 [DBG] Executing controller factory for controller FilesService.Controllers.FileUploadController (FilesService)
2024-03-16 19:35:55.673 +00:00 [DBG] Executed controller factory for controller FilesService.Controllers.FileUploadController (FilesService)
2024-03-16 19:35:55.674 +00:00 [DBG] Connection id "0HN25U142H8M1", Request id "0HN25U142H8M1:00000002": started reading request body.
2024-03-16 19:35:55.674 +00:00 [DBG] Connection id "0HN25U142H8M1", Request id "0HN25U142H8M1:00000002": done reading request body.
2024-03-16 19:35:55.675 +00:00 [DBG] Attempting to bind parameter 'fileUploadCreationDto' of type 'FilesService.Models.FileUploadCreationDto' ...
2024-03-16 19:35:55.678 +00:00 [DBG] Attempting to bind parameter 'fileUploadCreationDto' of type 'FilesService.Models.FileUploadCreationDto' using the name '' in request data ...
2024-03-16 19:35:55.685 +00:00 [DBG] Attempting to bind property 'FilesService.Models.FileUploadCreationDto.File' of type 'Microsoft.AspNetCore.Http.IFormFile' using the name 'File' in request data ...
2024-03-16 19:35:55.687 +00:00 [DBG] Done attempting to bind property 'FilesService.Models.FileUploadCreationDto.File' of type 'Microsoft.AspNetCore.Http.IFormFile'.
2024-03-16 19:35:55.688 +00:00 [DBG] Attempting to bind property 'FilesService.Models.FileUploadCreationDto.ClassificationTier' of type 'FilesService.Models.ClassificationTier' using the name 'ClassificationTier' in request data ...
2024-03-16 19:35:55.691 +00:00 [DBG] Done attempting to bind property 'FilesService.Models.FileUploadCreationDto.ClassificationTier' of type 'FilesService.Models.ClassificationTier'.
2024-03-16 19:35:55.692 +00:00 [DBG] Done attempting to bind parameter 'fileUploadCreationDto' of type 'FilesService.Models.FileUploadCreationDto'.
2024-03-16 19:35:55.692 +00:00 [DBG] Done attempting to bind parameter 'fileUploadCreationDto' of type 'FilesService.Models.FileUploadCreationDto'.
2024-03-16 19:35:55.692 +00:00 [DBG] Attempting to validate the bound parameter 'fileUploadCreationDto' of type 'FilesService.Models.FileUploadCreationDto' ...
2024-03-16 19:35:55.698 +00:00 [DBG] Done attempting to validate the bound parameter 'fileUploadCreationDto' of type 'FilesService.Models.FileUploadCreationDto'.
2024-03-16 19:35:55.700 +00:00 [INF] Executing action method FilesService.Controllers.FileUploadController.UploadFile (FilesService) - Validation state: "Valid"
2024-03-16 19:39:15.556 +00:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-03-16 19:39:15.629 +00:00 [DBG] Hosting starting
2024-03-16 19:39:15.725 +00:00 [INF] Now listening on: http://localhost:5001
2024-03-16 19:39:15.726 +00:00 [DBG] Loaded hosting startup assembly FilesService
2024-03-16 19:39:15.726 +00:00 [INF] Application started. Press Ctrl+C to shut down.
2024-03-16 19:39:15.726 +00:00 [INF] Hosting environment: Development
2024-03-16 19:39:15.726 +00:00 [INF] Content root path: /home/mc/code/projects/BlackLake.dev/UploadService/FilesService
2024-03-16 19:39:15.727 +00:00 [DBG] Hosting started
2024-03-16 19:39:29.447 +00:00 [DBG] Connection id "0HN25U35TPB6R" received FIN.
2024-03-16 19:39:29.454 +00:00 [DBG] Connection id "0HN25U35TPB6R" accepted.
2024-03-16 19:39:29.455 +00:00 [DBG] Connection id "0HN25U35TPB6R" started.
2024-03-16 19:39:29.458 +00:00 [DBG] Connection id "0HN25U35TPB6S" accepted.
2024-03-16 19:39:29.458 +00:00 [DBG] Connection id "0HN25U35TPB6S" started.
2024-03-16 19:39:29.478 +00:00 [DBG] Connection id "0HN25U35TPB6R" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-03-16 19:39:29.484 +00:00 [DBG] Connection id "0HN25U35TPB6R" disconnecting.
2024-03-16 19:39:29.485 +00:00 [DBG] Connection id "0HN25U35TPB6R" stopped.
2024-03-16 19:39:29.497 +00:00 [INF] Request starting HTTP/1.1 POST http://localhost:5001/api/files - multipart/form-data; boundary=--------------------------639813260531357666075896 38019
2024-03-16 19:39:29.501 +00:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-03-16 19:39:29.528 +00:00 [DBG] 1 candidate(s) found for the request path '/api/files'
2024-03-16 19:39:29.531 +00:00 [DBG] Endpoint 'FilesService.Controllers.FileUploadController.UploadFile (FilesService)' with route pattern 'api/files' is valid for the request path '/api/files'
2024-03-16 19:39:29.532 +00:00 [DBG] Request matched endpoint 'FilesService.Controllers.FileUploadController.UploadFile (FilesService)'
2024-03-16 19:39:29.542 +00:00 [WRN] Failed to determine the https port for redirect.
2024-03-16 19:39:29.543 +00:00 [INF] Executing endpoint 'FilesService.Controllers.FileUploadController.UploadFile (FilesService)'
2024-03-16 19:39:29.604 +00:00 [INF] Route matched with {action = "UploadFile", controller = "FileUpload"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[FilesService.Models.FileDto]] UploadFile(FilesService.Models.FileUploadCreationDto) on controller FilesService.Controllers.FileUploadController (FilesService).
2024-03-16 19:39:29.605 +00:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-03-16 19:39:29.606 +00:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-03-16 19:39:29.606 +00:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-03-16 19:39:29.606 +00:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-03-16 19:39:29.607 +00:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-03-16 19:39:29.609 +00:00 [DBG] Executing controller factory for controller FilesService.Controllers.FileUploadController (FilesService)
2024-03-16 19:39:29.768 +00:00 [DBG] Executed controller factory for controller FilesService.Controllers.FileUploadController (FilesService)
2024-03-16 19:39:29.777 +00:00 [DBG] Connection id "0HN25U35TPB6S", Request id "0HN25U35TPB6S:00000001": started reading request body.
2024-03-16 19:39:29.777 +00:00 [DBG] Connection id "0HN25U35TPB6S", Request id "0HN25U35TPB6S:00000001": done reading request body.
2024-03-16 19:39:29.792 +00:00 [DBG] Attempting to bind parameter 'fileUploadCreationDto' of type 'FilesService.Models.FileUploadCreationDto' ...
2024-03-16 19:39:29.794 +00:00 [DBG] Attempting to bind parameter 'fileUploadCreationDto' of type 'FilesService.Models.FileUploadCreationDto' using the name '' in request data ...
2024-03-16 19:39:29.798 +00:00 [DBG] Attempting to bind property 'FilesService.Models.FileUploadCreationDto.File' of type 'Microsoft.AspNetCore.Http.IFormFile' using the name 'File' in request data ...
2024-03-16 19:39:29.800 +00:00 [DBG] Done attempting to bind property 'FilesService.Models.FileUploadCreationDto.File' of type 'Microsoft.AspNetCore.Http.IFormFile'.
2024-03-16 19:39:29.802 +00:00 [DBG] Attempting to bind property 'FilesService.Models.FileUploadCreationDto.ClassificationTier' of type 'FilesService.Models.ClassificationTier' using the name 'ClassificationTier' in request data ...
2024-03-16 19:39:29.805 +00:00 [DBG] Done attempting to bind property 'FilesService.Models.FileUploadCreationDto.ClassificationTier' of type 'FilesService.Models.ClassificationTier'.
2024-03-16 19:39:29.806 +00:00 [DBG] Done attempting to bind parameter 'fileUploadCreationDto' of type 'FilesService.Models.FileUploadCreationDto'.
2024-03-16 19:39:29.807 +00:00 [DBG] Done attempting to bind parameter 'fileUploadCreationDto' of type 'FilesService.Models.FileUploadCreationDto'.
2024-03-16 19:39:29.807 +00:00 [DBG] Attempting to validate the bound parameter 'fileUploadCreationDto' of type 'FilesService.Models.FileUploadCreationDto' ...
2024-03-16 19:39:29.813 +00:00 [DBG] Done attempting to validate the bound parameter 'fileUploadCreationDto' of type 'FilesService.Models.FileUploadCreationDto'.
2024-03-16 19:39:29.821 +00:00 [INF] Executing action method FilesService.Controllers.FileUploadController.UploadFile (FilesService) - Validation state: "Valid"
2024-03-16 19:40:03.653 +00:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2024-03-16 19:40:03.719 +00:00 [DBG] Hosting starting
2024-03-16 19:40:03.799 +00:00 [INF] Now listening on: http://localhost:5001
2024-03-16 19:40:03.800 +00:00 [DBG] Loaded hosting startup assembly FilesService
2024-03-16 19:40:03.800 +00:00 [INF] Application started. Press Ctrl+C to shut down.
2024-03-16 19:40:03.800 +00:00 [INF] Hosting environment: Development
2024-03-16 19:40:03.801 +00:00 [INF] Content root path: /home/mc/code/projects/BlackLake.dev/UploadService/FilesService
2024-03-16 19:40:03.801 +00:00 [DBG] Hosting started
2024-03-16 19:40:07.433 +00:00 [DBG] Connection id "0HN25U3H81JMA" received FIN.
2024-03-16 19:40:07.438 +00:00 [DBG] Connection id "0HN25U3H81JMA" accepted.
2024-03-16 19:40:07.439 +00:00 [DBG] Connection id "0HN25U3H81JMA" started.
2024-03-16 19:40:07.456 +00:00 [DBG] Connection id "0HN25U3H81JMB" accepted.
2024-03-16 19:40:07.457 +00:00 [DBG] Connection id "0HN25U3H81JMB" started.
2024-03-16 19:40:07.459 +00:00 [DBG] Connection id "0HN25U3H81JMA" sending FIN because: "The Socket transport's send loop completed gracefully."
2024-03-16 19:40:07.465 +00:00 [DBG] Connection id "0HN25U3H81JMA" disconnecting.
2024-03-16 19:40:07.466 +00:00 [DBG] Connection id "0HN25U3H81JMA" stopped.
2024-03-16 19:40:07.489 +00:00 [INF] Request starting HTTP/1.1 POST http://localhost:5001/api/files - multipart/form-data; boundary=--------------------------111112443506970559704464 38019
2024-03-16 19:40:07.493 +00:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2024-03-16 19:40:07.513 +00:00 [DBG] 1 candidate(s) found for the request path '/api/files'
2024-03-16 19:40:07.515 +00:00 [DBG] Endpoint 'FilesService.Controllers.FileUploadController.UploadFile (FilesService)' with route pattern 'api/files' is valid for the request path '/api/files'
2024-03-16 19:40:07.516 +00:00 [DBG] Request matched endpoint 'FilesService.Controllers.FileUploadController.UploadFile (FilesService)'
2024-03-16 19:40:07.524 +00:00 [WRN] Failed to determine the https port for redirect.
2024-03-16 19:40:07.525 +00:00 [INF] Executing endpoint 'FilesService.Controllers.FileUploadController.UploadFile (FilesService)'
2024-03-16 19:40:07.572 +00:00 [INF] Route matched with {action = "UploadFile", controller = "FileUpload"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[FilesService.Models.FileDto]] UploadFile(FilesService.Models.FileUploadCreationDto) on controller FilesService.Controllers.FileUploadController (FilesService).
2024-03-16 19:40:07.573 +00:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2024-03-16 19:40:07.574 +00:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2024-03-16 19:40:07.574 +00:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2024-03-16 19:40:07.574 +00:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2024-03-16 19:40:07.574 +00:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2024-03-16 19:40:07.576 +00:00 [DBG] Executing controller factory for controller FilesService.Controllers.FileUploadController (FilesService)
2024-03-16 19:40:07.691 +00:00 [DBG] Executed controller factory for controller FilesService.Controllers.FileUploadController (FilesService)
2024-03-16 19:40:07.697 +00:00 [DBG] Connection id "0HN25U3H81JMB", Request id "0HN25U3H81JMB:00000001": started reading request body.
2024-03-16 19:40:07.697 +00:00 [DBG] Connection id "0HN25U3H81JMB", Request id "0HN25U3H81JMB:00000001": done reading request body.
2024-03-16 19:40:07.707 +00:00 [DBG] Attempting to bind parameter 'fileUploadCreationDto' of type 'FilesService.Models.FileUploadCreationDto' ...
2024-03-16 19:40:07.709 +00:00 [DBG] Attempting to bind parameter 'fileUploadCreationDto' of type 'FilesService.Models.FileUploadCreationDto' using the name '' in request data ...
2024-03-16 19:40:07.712 +00:00 [DBG] Attempting to bind property 'FilesService.Models.FileUploadCreationDto.File' of type 'Microsoft.AspNetCore.Http.IFormFile' using the name 'File' in request data ...
2024-03-16 19:40:07.713 +00:00 [DBG] Done attempting to bind property 'FilesService.Models.FileUploadCreationDto.File' of type 'Microsoft.AspNetCore.Http.IFormFile'.
2024-03-16 19:40:07.715 +00:00 [DBG] Attempting to bind property 'FilesService.Models.FileUploadCreationDto.ClassificationTier' of type 'FilesService.Models.ClassificationTier' using the name 'ClassificationTier' in request data ...
2024-03-16 19:40:07.717 +00:00 [DBG] Done attempting to bind property 'FilesService.Models.FileUploadCreationDto.ClassificationTier' of type 'FilesService.Models.ClassificationTier'.
2024-03-16 19:40:07.718 +00:00 [DBG] Done attempting to bind parameter 'fileUploadCreationDto' of type 'FilesService.Models.FileUploadCreationDto'.
2024-03-16 19:40:07.718 +00:00 [DBG] Done attempting to bind parameter 'fileUploadCreationDto' of type 'FilesService.Models.FileUploadCreationDto'.
2024-03-16 19:40:07.718 +00:00 [DBG] Attempting to validate the bound parameter 'fileUploadCreationDto' of type 'FilesService.Models.FileUploadCreationDto' ...
2024-03-16 19:40:07.722 +00:00 [DBG] Done attempting to validate the bound parameter 'fileUploadCreationDto' of type 'FilesService.Models.FileUploadCreationDto'.
2024-03-16 19:40:07.727 +00:00 [INF] Executing action method FilesService.Controllers.FileUploadController.UploadFile (FilesService) - Validation state: "Valid"
2024-03-16 19:40:28.139 +00:00 [INF] Executed action FilesService.Controllers.FileUploadController.UploadFile (FilesService) in 20562.0403ms
2024-03-16 19:40:28.143 +00:00 [INF] Executed endpoint 'FilesService.Controllers.FileUploadController.UploadFile (FilesService)'
2024-03-16 19:40:28.144 +00:00 [ERR] An unhandled exception has occurred while executing the request.
System.IO.DirectoryNotFoundException: Could not find a part of the path '/app/data/files/ed81b03b-8e5f-46cc-8ab9-a07bda5e2967.pdf'.
   at Interop.ThrowExceptionForIoErrno(ErrorInfo errorInfo, String path, Boolean isDirError)
   at Microsoft.Win32.SafeHandles.SafeFileHandle.Open(String path, OpenFlags flags, Int32 mode, Boolean failForSymlink, Boolean& wasSymlink, Func`4 createOpenException)
   at Microsoft.Win32.SafeHandles.SafeFileHandle.Open(String fullPath, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, UnixFileMode openPermissions, Int64& fileLength, UnixFileMode& filePermissions, Boolean failForSymlink, Boolean& wasSymlink, Func`4 createOpenException)
   at System.IO.Strategies.OSFileStreamStrategy..ctor(String path, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)
   at System.IO.FileStream..ctor(String path, FileMode mode)
   at FilesService.Services.FilePersistenceService.SaveToFileSystemAsync(IFormFile file, String targetFilePath) in /home/mc/code/projects/BlackLake.dev/UploadService/FilesService/Services/FilePersistenceService.cs:line 22
   at FilesService.Services.FilePersistenceService.SaveFile(IFormFile file) in /home/mc/code/projects/BlackLake.dev/UploadService/FilesService/Services/FilePersistenceService.cs:line 11
   at FilesService.Services.FileHandler.HandleFile(FileEntity fileEntity) in /home/mc/code/projects/BlackLake.dev/UploadService/FilesService/Services/FileHandler.cs:line 28
   at FilesService.Controllers.FileUploadController.UploadFile(FileUploadCreationDto fileUploadCreationDto) in /home/mc/code/projects/BlackLake.dev/UploadService/FilesService/Controllers/FileUploadController.cs:line 39
   at lambda_method4(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-03-16 19:40:28.259 +00:00 [DBG] Connection id "0HN25U3H81JMB" completed keep alive response.
2024-03-16 19:40:28.276 +00:00 [INF] Request finished HTTP/1.1 POST http://localhost:5001/api/files - 500 null text/plain; charset=utf-8 20787.631ms
2024-03-16 19:42:20.686 +00:00 [DBG] Config reload token fired. Checking for changes...
2024-03-16 20:04:24.657 +00:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-03-16 20:07:24.428 +00:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-03-16 20:07:51.570 +00:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-03-16 20:08:33.663 +00:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-03-16 20:08:33.876 +00:00 [DBG] Entity Framework Core 8.0.3 initialized 'FileDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.3' with options: None
2024-03-16 20:08:34.092 +00:00 [DBG] 'FileDbContext' disposed.
2024-03-16 20:08:48.423 +00:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-03-16 20:08:48.626 +00:00 [DBG] Entity Framework Core 8.0.3 initialized 'FileDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.3' with options: None
2024-03-16 20:08:48.635 +00:00 [DBG] Creating DbConnection.
2024-03-16 20:08:48.639 +00:00 [DBG] Created DbConnection. (2ms).
2024-03-16 20:08:48.641 +00:00 [DBG] Migrating using database 'main' on server ''.
2024-03-16 20:08:48.643 +00:00 [DBG] Creating DbConnection.
2024-03-16 20:08:48.645 +00:00 [DBG] Created DbConnection. (1ms).
2024-03-16 20:08:48.646 +00:00 [DBG] Opening connection to database 'main' on server ''.
2024-03-16 20:08:48.651 +00:00 [DBG] Opened connection to database 'main' on server ''.
2024-03-16 20:08:48.653 +00:00 [DBG] Disposing connection to database 'main' on server ''.
2024-03-16 20:08:48.655 +00:00 [DBG] Disposed connection to database 'main' on server '' (0ms).
2024-03-16 20:08:48.659 +00:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2024-03-16 20:08:48.661 +00:00 [DBG] Created DbCommand for 'ExecuteScalar' (2ms).
2024-03-16 20:08:48.662 +00:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (4ms).
2024-03-16 20:08:48.662 +00:00 [DBG] Opening connection to database 'main' on server ''.
2024-03-16 20:08:48.662 +00:00 [DBG] Opened connection to database 'main' on server ''.
2024-03-16 20:08:48.665 +00:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2024-03-16 20:08:48.674 +00:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2024-03-16 20:08:48.675 +00:00 [DBG] Closing connection to database 'main' on server ''.
2024-03-16 20:08:48.675 +00:00 [DBG] Closed connection to database 'main' on server '' (0ms).
2024-03-16 20:08:48.676 +00:00 [DBG] Creating DbConnection.
2024-03-16 20:08:48.676 +00:00 [DBG] Created DbConnection. (0ms).
2024-03-16 20:08:48.676 +00:00 [DBG] Opening connection to database 'main' on server ''.
2024-03-16 20:08:48.676 +00:00 [DBG] Opened connection to database 'main' on server ''.
2024-03-16 20:08:48.676 +00:00 [DBG] Disposing connection to database 'main' on server ''.
2024-03-16 20:08:48.676 +00:00 [DBG] Disposed connection to database 'main' on server '' (0ms).
2024-03-16 20:08:48.712 +00:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2024-03-16 20:08:48.712 +00:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2024-03-16 20:08:48.712 +00:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2024-03-16 20:08:48.712 +00:00 [DBG] Opening connection to database 'main' on server ''.
2024-03-16 20:08:48.712 +00:00 [DBG] Opened connection to database 'main' on server ''.
2024-03-16 20:08:48.712 +00:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "__EFMigrationsHistory" (
    "MigrationId" TEXT NOT NULL CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY,
    "ProductVersion" TEXT NOT NULL
);
2024-03-16 20:08:48.714 +00:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "__EFMigrationsHistory" (
    "MigrationId" TEXT NOT NULL CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY,
    "ProductVersion" TEXT NOT NULL
);
2024-03-16 20:08:48.714 +00:00 [DBG] Closing connection to database 'main' on server ''.
2024-03-16 20:08:48.714 +00:00 [DBG] Closed connection to database 'main' on server '' (0ms).
2024-03-16 20:08:48.714 +00:00 [DBG] Creating DbConnection.
2024-03-16 20:08:48.715 +00:00 [DBG] Created DbConnection. (0ms).
2024-03-16 20:08:48.715 +00:00 [DBG] Opening connection to database 'main' on server ''.
2024-03-16 20:08:48.715 +00:00 [DBG] Opened connection to database 'main' on server ''.
2024-03-16 20:08:48.715 +00:00 [DBG] Disposing connection to database 'main' on server ''.
2024-03-16 20:08:48.715 +00:00 [DBG] Disposed connection to database 'main' on server '' (0ms).
2024-03-16 20:08:48.715 +00:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2024-03-16 20:08:48.715 +00:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2024-03-16 20:08:48.715 +00:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2024-03-16 20:08:48.715 +00:00 [DBG] Opening connection to database 'main' on server ''.
2024-03-16 20:08:48.715 +00:00 [DBG] Opened connection to database 'main' on server ''.
2024-03-16 20:08:48.715 +00:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2024-03-16 20:08:48.716 +00:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2024-03-16 20:08:48.716 +00:00 [DBG] Closing connection to database 'main' on server ''.
2024-03-16 20:08:48.716 +00:00 [DBG] Closed connection to database 'main' on server '' (0ms).
2024-03-16 20:08:48.721 +00:00 [INF] Applying migration '20240316200834_InitialMigration'.
2024-03-16 20:08:48.727 +00:00 [DBG] Opening connection to database 'main' on server ''.
2024-03-16 20:08:48.728 +00:00 [DBG] Opened connection to database 'main' on server ''.
2024-03-16 20:08:48.729 +00:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2024-03-16 20:08:48.731 +00:00 [DBG] Began transaction with isolation level 'Serializable'.
2024-03-16 20:08:48.731 +00:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2024-03-16 20:08:48.731 +00:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2024-03-16 20:08:48.732 +00:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2024-03-16 20:08:48.732 +00:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "Files" (
    "Id" TEXT NOT NULL CONSTRAINT "PK_Files" PRIMARY KEY,
    "ClassificationTier" INTEGER NOT NULL,
    "Path" TEXT NOT NULL
);
2024-03-16 20:08:48.732 +00:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "Files" (
    "Id" TEXT NOT NULL CONSTRAINT "PK_Files" PRIMARY KEY,
    "ClassificationTier" INTEGER NOT NULL,
    "Path" TEXT NOT NULL
);
2024-03-16 20:08:48.732 +00:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2024-03-16 20:08:48.732 +00:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2024-03-16 20:08:48.733 +00:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2024-03-16 20:08:48.733 +00:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
VALUES ('20240316200834_InitialMigration', '8.0.3');
2024-03-16 20:08:48.734 +00:00 [ERR] Failed executing DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
VALUES ('20240316200834_InitialMigration', '8.0.3');
2024-03-16 20:08:48.735 +00:00 [DBG] Disposing transaction.
2024-03-16 20:08:48.735 +00:00 [DBG] Closing connection to database 'main' on server ''.
2024-03-16 20:08:48.735 +00:00 [DBG] Closed connection to database 'main' on server '' (0ms).
2024-03-16 20:08:48.736 +00:00 [DBG] 'FileDbContext' disposed.
2024-03-16 20:08:48.737 +00:00 [DBG] Disposing connection to database 'main' on server ''.
2024-03-16 20:08:48.737 +00:00 [DBG] Disposed connection to database 'main' on server '' (0ms).
2024-03-16 20:09:35.771 +00:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2024-03-16 20:09:35.968 +00:00 [DBG] Entity Framework Core 8.0.3 initialized 'FileDbContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:8.0.3' with options: None
2024-03-16 20:09:35.975 +00:00 [DBG] Creating DbConnection.
2024-03-16 20:09:35.979 +00:00 [DBG] Created DbConnection. (2ms).
2024-03-16 20:09:35.980 +00:00 [DBG] Migrating using database 'main' on server 'files.db'.
2024-03-16 20:09:35.982 +00:00 [DBG] Creating DbConnection.
2024-03-16 20:09:35.983 +00:00 [DBG] Created DbConnection. (1ms).
2024-03-16 20:09:35.983 +00:00 [DBG] Opening connection to database 'main' on server 'files.db'.
2024-03-16 20:09:35.987 +00:00 [DBG] An error occurred using the connection to database 'main' on server 'files.db'.
2024-03-16 20:09:35.988 +00:00 [DBG] Disposing connection to database 'main' on server 'files.db'.
2024-03-16 20:09:35.992 +00:00 [DBG] Disposed connection to database 'main' on server 'files.db' (0ms).
2024-03-16 20:09:35.992 +00:00 [DBG] Creating DbConnection.
2024-03-16 20:09:35.992 +00:00 [DBG] Created DbConnection. (0ms).
2024-03-16 20:09:35.992 +00:00 [DBG] Opening connection to database 'main' on server 'files.db'.
2024-03-16 20:09:35.993 +00:00 [DBG] An error occurred using the connection to database 'main' on server 'files.db'.
2024-03-16 20:09:35.993 +00:00 [DBG] Disposing connection to database 'main' on server 'files.db'.
2024-03-16 20:09:35.993 +00:00 [DBG] Disposed connection to database 'main' on server 'files.db' (0ms).
2024-03-16 20:09:35.993 +00:00 [DBG] Opening connection to database 'main' on server 'files.db'.
2024-03-16 20:09:35.996 +00:00 [DBG] Opened connection to database 'main' on server '/home/mc/code/projects/BlackLake.dev/UploadService/FilesService/files.db'.
2024-03-16 20:09:35.999 +00:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2024-03-16 20:09:36.002 +00:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (2ms).
2024-03-16 20:09:36.002 +00:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (4ms).
2024-03-16 20:09:36.005 +00:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
PRAGMA journal_mode = 'wal';
2024-03-16 20:09:36.024 +00:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
PRAGMA journal_mode = 'wal';
2024-03-16 20:09:36.026 +00:00 [DBG] Closing connection to database 'main' on server '/home/mc/code/projects/BlackLake.dev/UploadService/FilesService/files.db'.
2024-03-16 20:09:36.027 +00:00 [DBG] Closed connection to database 'main' on server 'files.db' (1ms).
2024-03-16 20:09:36.063 +00:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2024-03-16 20:09:36.063 +00:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2024-03-16 20:09:36.063 +00:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2024-03-16 20:09:36.063 +00:00 [DBG] Opening connection to database 'main' on server 'files.db'.
2024-03-16 20:09:36.064 +00:00 [DBG] Opened connection to database 'main' on server '/home/mc/code/projects/BlackLake.dev/UploadService/FilesService/files.db'.
2024-03-16 20:09:36.064 +00:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "__EFMigrationsHistory" (
    "MigrationId" TEXT NOT NULL CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY,
    "ProductVersion" TEXT NOT NULL
);
2024-03-16 20:09:36.066 +00:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "__EFMigrationsHistory" (
    "MigrationId" TEXT NOT NULL CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY,
    "ProductVersion" TEXT NOT NULL
);
2024-03-16 20:09:36.066 +00:00 [DBG] Closing connection to database 'main' on server '/home/mc/code/projects/BlackLake.dev/UploadService/FilesService/files.db'.
2024-03-16 20:09:36.066 +00:00 [DBG] Closed connection to database 'main' on server 'files.db' (0ms).
2024-03-16 20:09:36.067 +00:00 [DBG] Creating DbConnection.
2024-03-16 20:09:36.067 +00:00 [DBG] Created DbConnection. (0ms).
2024-03-16 20:09:36.068 +00:00 [DBG] Opening connection to database 'main' on server 'files.db'.
2024-03-16 20:09:36.068 +00:00 [DBG] Opened connection to database 'main' on server '/home/mc/code/projects/BlackLake.dev/UploadService/FilesService/files.db'.
2024-03-16 20:09:36.069 +00:00 [DBG] Disposing connection to database 'main' on server 'files.db'.
2024-03-16 20:09:36.069 +00:00 [DBG] Disposed connection to database 'main' on server 'files.db' (0ms).
2024-03-16 20:09:36.070 +00:00 [DBG] Creating DbCommand for 'ExecuteScalar'.
2024-03-16 20:09:36.070 +00:00 [DBG] Created DbCommand for 'ExecuteScalar' (0ms).
2024-03-16 20:09:36.070 +00:00 [DBG] Initialized DbCommand for 'ExecuteScalar' (0ms).
2024-03-16 20:09:36.071 +00:00 [DBG] Opening connection to database 'main' on server 'files.db'.
2024-03-16 20:09:36.071 +00:00 [DBG] Opened connection to database 'main' on server '/home/mc/code/projects/BlackLake.dev/UploadService/FilesService/files.db'.
2024-03-16 20:09:36.071 +00:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2024-03-16 20:09:36.072 +00:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2024-03-16 20:09:36.073 +00:00 [DBG] Closing connection to database 'main' on server '/home/mc/code/projects/BlackLake.dev/UploadService/FilesService/files.db'.
2024-03-16 20:09:36.073 +00:00 [DBG] Closed connection to database 'main' on server 'files.db' (0ms).
2024-03-16 20:09:36.073 +00:00 [DBG] Opening connection to database 'main' on server 'files.db'.
2024-03-16 20:09:36.074 +00:00 [DBG] Opened connection to database 'main' on server '/home/mc/code/projects/BlackLake.dev/UploadService/FilesService/files.db'.
2024-03-16 20:09:36.074 +00:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2024-03-16 20:09:36.074 +00:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2024-03-16 20:09:36.074 +00:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2024-03-16 20:09:36.074 +00:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2024-03-16 20:09:36.075 +00:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM "__EFMigrationsHistory"
ORDER BY "MigrationId";
2024-03-16 20:09:36.075 +00:00 [DBG] Closing data reader to 'main' on server '/home/mc/code/projects/BlackLake.dev/UploadService/FilesService/files.db'.
2024-03-16 20:09:36.076 +00:00 [DBG] A data reader for 'main' on server '/home/mc/code/projects/BlackLake.dev/UploadService/FilesService/files.db' is being disposed after spending 0ms reading results.
2024-03-16 20:09:36.076 +00:00 [DBG] Closing connection to database 'main' on server '/home/mc/code/projects/BlackLake.dev/UploadService/FilesService/files.db'.
2024-03-16 20:09:36.076 +00:00 [DBG] Closed connection to database 'main' on server 'files.db' (0ms).
2024-03-16 20:09:36.081 +00:00 [INF] Applying migration '20240316200834_InitialMigration'.
2024-03-16 20:09:36.088 +00:00 [DBG] Opening connection to database 'main' on server 'files.db'.
2024-03-16 20:09:36.089 +00:00 [DBG] Opened connection to database 'main' on server '/home/mc/code/projects/BlackLake.dev/UploadService/FilesService/files.db'.
2024-03-16 20:09:36.091 +00:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2024-03-16 20:09:36.092 +00:00 [DBG] Began transaction with isolation level 'Serializable'.
2024-03-16 20:09:36.093 +00:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2024-03-16 20:09:36.093 +00:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2024-03-16 20:09:36.093 +00:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2024-03-16 20:09:36.093 +00:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "Files" (
    "Id" TEXT NOT NULL CONSTRAINT "PK_Files" PRIMARY KEY,
    "ClassificationTier" INTEGER NOT NULL,
    "Path" TEXT NOT NULL
);
2024-03-16 20:09:36.093 +00:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "Files" (
    "Id" TEXT NOT NULL CONSTRAINT "PK_Files" PRIMARY KEY,
    "ClassificationTier" INTEGER NOT NULL,
    "Path" TEXT NOT NULL
);
2024-03-16 20:09:36.094 +00:00 [DBG] Creating DbCommand for 'ExecuteNonQuery'.
2024-03-16 20:09:36.094 +00:00 [DBG] Created DbCommand for 'ExecuteNonQuery' (0ms).
2024-03-16 20:09:36.094 +00:00 [DBG] Initialized DbCommand for 'ExecuteNonQuery' (0ms).
2024-03-16 20:09:36.094 +00:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
VALUES ('20240316200834_InitialMigration', '8.0.3');
2024-03-16 20:09:36.094 +00:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "__EFMigrationsHistory" ("MigrationId", "ProductVersion")
VALUES ('20240316200834_InitialMigration', '8.0.3');
2024-03-16 20:09:36.095 +00:00 [DBG] Committing transaction.
2024-03-16 20:09:36.096 +00:00 [DBG] Committed transaction.
2024-03-16 20:09:36.097 +00:00 [DBG] Disposing transaction.
2024-03-16 20:09:36.097 +00:00 [DBG] Closing connection to database 'main' on server '/home/mc/code/projects/BlackLake.dev/UploadService/FilesService/files.db'.
2024-03-16 20:09:36.097 +00:00 [DBG] Closed connection to database 'main' on server 'files.db' (0ms).
2024-03-16 20:09:36.098 +00:00 [DBG] 'FileDbContext' disposed.
2024-03-16 20:09:36.098 +00:00 [DBG] Disposing connection to database 'main' on server 'files.db'.
2024-03-16 20:09:36.098 +00:00 [DBG] Disposed connection to database 'main' on server 'files.db' (0ms).
